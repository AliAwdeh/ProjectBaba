<!-- dashboard-admin.ejs -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f8f9fa;
            padding-top: 50px;
            margin-bottom: 150px;
        }

        .container {
            text-align: center;
            max-width: 800px;
        }

        .navbar {
            background-color: #f8f9fa;
        }

        .navbar-light .navbar-nav .nav-link {
            color: #007bff;
        }

        .btn-custom {
            margin: 10px;
        }

        .bg-light {
            background-color: #f8f9fa;
        }

        h2 {
            margin-bottom: 0;
            color: #007bff;
        }

        .btn-danger {
            background-color: #dc3545;
            border-color: #dc3545;
        }

        .list-group-item {
            margin-bottom: 10px;
            position: relative;
            background-color: #fff;
        }

        .car-details {
            font-size: 12px;
            margin-top: 5px;
            text-align: left;
            padding: 10px;
            background-color: #f8f9fa;
        }

        .navbar-brand-title {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            color: #007bff;
        }

        .btn-add-car {
            background-color: #dc3545;
            border-color: #dc3545;
        }

        .btn-sign-out {
            background-color: #dc3545;
            border-color: #dc3545;
        }

        .footer {
            background-color: #fff;
            color: #444;
            padding: 10px;
            width: 100%;
            position: fixed;
            bottom: 0;
        }

        .footer p {
            margin: 5px 0;
            font-size: 12px;
            display: inline-block;
            margin-right: 20px;
        }

        /* Add your custom styles here */
        .mt-3 {
            margin-top: 3rem;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top">
        <a class="navbar-brand" href="#">Garage Awdeh</a>
        <a class="navbar-brand navbar-brand-title" href="#">Admin Dashboard</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/dashboard-admin">Service</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/admin/add-car">Add A Car</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/admin/add-customer">Add A Customer</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/clientReservation/admin-res">Reservations</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/history">History</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/logout">Sign Out</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container mt-5">
        <h2>Admin Dashboard</h2>

        <!-- Additional content for Admin Dashboard -->
        <% if (isAdmin) { %>
            <!-- Add your admin-specific content here -->
            <div class="mt-3">
                <h4>Add New Service</h4>
                <% if (successMessage) { %>
                    <!-- Trigger the browser notification for success message -->
                    <script>
                        showNotification("<%= successMessage %>");
                    </script>
                <% } %>
                <form action="/dashboard-admin/add-service" method="post">
                    <div class="form-group">
                        <label for="licensePlate">License Plate:</label>
                        <input type="text" class="form-control" id="licensePlate" name="licensePlate" required>
                    </div>
                    <div class="form-group">
                        <label for="serviceDate">Service Date:</label>
                        <input type="date" class="form-control" id="serviceDate" name="serviceDate" required>
                    </div>
                    <div class="form-group">
                        <label for="odometer">Odometer:</label>
                        <input type="number" class="form-control" id="odometer" name="odometer" required>
                    </div>
                    <div class="form-group">
                        <label for="description">Description:</label>
                        <textarea class="form-control" id="description" name="description" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="totalCost">Total Cost:</label>
                        <input type="number" step="0.01" class="form-control" id="totalCost" name="totalCost" required>
                    </div>
                    <div class="form-group">
                        <label for="paid">Paid:</label>
                        <input type="number" step="0.01" class="form-control" id="paid" name="paid" required>
                    </div>
                    <div class="form-group">
                        <label for="outstanding">Outstanding:</label>
                        <input type="number" step="0.01" class="form-control" id="outstanding" name="outstanding" required>
                    </div>
                    <div class="form-group">
                        <label for="labor">Labor:</label>
                        <input type="number" step="0.01" class="form-control" id="labor" name="labor" required>
                    </div>
                    <div class="form-group" id="parts-container">
                        <label>Parts:</label>
                        <div class="row">
                            <div class="col-md-6">
                                <input type="text" class="form-control" name="parts[]" placeholder="Part 1" required>
                            </div>
                            <div class="col-md-4">
                                <input type="number" step="0.01" class="form-control" name="partPrices[]" placeholder="Price" required>
                            </div>
                            <div class="col-md-2">
                                <button type="button" class="btn btn-success" onclick="addPartField()">Add Part</button>
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary mt-3">Add Service</button>
                </form>
            </div>
        <% } %>
    </div>

    <!-- Bootstrap JS and Popper.js (optional, for Bootstrap components that require JavaScript) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <!-- Replace the link below with the Popper.js link you want to use -->
    <script src="https://unpkg.com/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
    function addPartField() {
        const partsContainer = document.getElementById('parts-container');
        const newRow = document.createElement('div');
        newRow.classList.add('row', 'mt-2');
        newRow.innerHTML = `
            <div class="col-md-6">
                <input type="text" class="form-control" name="parts[]" placeholder="Part" required>
            </div>
            <div class="col-md-4">
                <input type="number" step="0.01" class="form-control" name="partPrices[]" placeholder="Price" required>
            </div>
            <div class="col-md-2">
                <button type="button" class="btn btn-danger" onclick="removePartField(this.parentNode)">Remove</button>
            </div>
        `;
        partsContainer.appendChild(newRow);
    }
    function removePartField(button) {
    const partsContainer = document.getElementById('parts-container');
    const row2remove = button.closest('.row');
    
    if (row2remove) {
        partsContainer.removeChild(row2remove);
    }
}



        function showNotification(message) {
            // Use the Notification API to show a browser notification
            if (Notification.permission === 'granted') {
                new Notification('Service Added Successfully', {
                    body: message,
                    icon: 'path/to/your/icon.png' // Replace with the path to your notification icon
                });
            } else if (Notification.permission !== 'denied') {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        new Notification('Service Added Successfully', {
                            body: message,
                            icon: 'path/to/your/icon.png' // Replace with the path to your notification icon
                        });
                    }
                });
            }
        }
    </script>
</body>
</html>
